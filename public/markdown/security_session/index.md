---
folderName: security_session
updatedAt: 2025-02-06
title: Session 인증
tag: security
isPublished: true
---

# Session 인증

- [Session을 사용하는 이유](#session을-사용하는-이유)
- [Session 저장소](#session-저장소)
- [Session 인증 흐름](#session-인증-흐름)

아래는 Session과 JWT(JSON Web Token)의 차이를 정리한 표이다.

| 특징               | Session                           | JWT                                          |
| ------------------ | --------------------------------- | -------------------------------------------- |
| 상태 관리          | 서버에서 상태를 유지              | 클라이언트 측에서 상태를 유지                |
| 저장 위치          | 서버 메모리 또는 데이터베이스     | 클라이언트에 토큰 형태로 저장                |
| 유효성 검증        | 서버에서 직접 관리                | 토큰의 서명을 통해 클라이언트에서 검증       |
| 확장성             | 서버에 의존적, 수평적 확장 어려움 | 서버 간 상태 공유가 용이, 확장성 높음        |
| 데이터 크기        | 저장하는 데이터 크기 제한 없음    | 토큰 크기가 커질 경우 성능 저하 우려         |
| 보안               | 세션 ID 노출 시 공격 가능         | 노출 시 서명 검증이 어려움, 추가 암호화 필요 |
| 로그아웃 처리      | 서버에서 세션 삭제                | 클라이언트 측에서 토큰 삭제                  |
| 주로 사용되는 용도 | 사용자 인증 및 상태 유지          | 인증 및 정보 공유, API 서비스와의 통신       |

이 표를 통해 Session과 JWT 간의 주요 차이를 확인할 수 있다.

아래는 인증 방식에 따라 XSS(Cross-Site Scripting)와 CSRF(Cross-Site Request Forgery)와 같은 웹 취약점에 대응하는 차이를 정리한 표이다.

| 인증 방식      | XSS 대응                                     | CSRF 대응                                    |
| -------------- | -------------------------------------------- | -------------------------------------------- |
| 세션 기반 인증 | 사용자 입력값 검증 및 이스케이프 처리 필요   | CSRF 토큰을 활용하여 요청의 진위를 검증      |
| JWT 기반 인증  | JWT 서명을 통해 토큰의 변조 방지             | SameSite 속성 설정 및 CSRF 토큰 사용         |
| 기본 인증      | 사용자 입력값 필터링 및 이스케이프 필요      | CSRF 토큰 필요, 디폴트로 CSRF 방지 논리 부여 |
| OAuth          | 사용자 입력값 검증, OAuth 서버의 신뢰성 필요 | Redirect URI 검증 및 CSRF 토큰 사용          |

이 표는 각 인증 방식이 XSS 및 CSRF 공격에 어떻게 대응하는지를 나타낸다. 각 방식에 따라 필요한 보안 조치 및 원리가 다르므로, 이를 이해하고 적용하는 것이 중요하다.

## Session을 사용하는 이유

- 상태 유지: HTTP 프로토콜은 무상태(stateless) 프로토콜이다. Session은 클라이언트와 서버 간의 상태 정보를 유지하여 사용자 경험을 향상시킨다.
- 인증 및 권한 관리: 사용자가 로그인한 상태를 유지하기 위해 세션은 유효한 인증 정보를 저장한다. 이를 통해 사용자의 권한을 효과적으로 관리할 수 있다.
- 데이터 저장: 세션을 통해 사용자별로 데이터를 저장하고 관리하며, 여러 페이지 간에 데이터 전달을 용이하게 한다.
- 보안: 세션 ID를 사용하여 사용자를 식별하고, 민감한 정보를 보호하는 데 도움을 준다. 이를 통해 CSRF 같은 공격을 예방할 수 있다.
- 다중 요청 처리: 세션은 사용자의 여러 요청을 연결하고, 일관된 데이터 전달을 가능하게 하여 애플리케이션의 생산성을 높인다.

## Session 저장소

| 저장 방식   | 설명                                       | 장점                                     | 단점                                               |
| ----------- | ------------------------------------------ | ---------------------------------------- | -------------------------------------------------- |
| 서버 메모리 | 서버의 메모리에 저장                       | 빠른 접근 속도                           | 서버 재시작 시 데이터 손실, 서버 확장 시 문제 발생 |
| 인메모리 DB | Redis 등의 인메모리 데이터베이스에 저장    | 빠른 접근 속도, 데이터 복제 및 분산 가능 | 휘발성 데이터베이스이므로 데이터 영속성 낮음       |
| 디스크 DB   | MySQL 등의 디스크 기반 데이터베이스에 저장 | 데이터 영속성 보장, 데이터 백업 가능     | 접근 속도 상대적으로 느림                          |
| 파일 시스템 | 파일 형태로 서버의 파일 시스템에 저장      | 구현이 간단, 데이터 영속성 보장          | 파일 읽기/쓰기 속도 느림, 파일 시스템에 의존적     |

## Session 인증 흐름

![img](images/session_auth.png)
